<script>
const quizData = [
  // --- তোমার সব 20টা question এখানে থাকবে ---
];

let currentQuestion = 0;
let score = 0;
let selectedAnswer = null;

const quizContainer = document.getElementById("quiz");
const questionEl = document.getElementById("question");
const answerButtons = document.getElementById("answer-buttons");
const nextButton = document.getElementById("next-btn");
const progressBar = document.getElementById("progress-bar");

function startQuiz() {
  currentQuestion = 0;
  score = 0;
  nextButton.innerHTML = "Next";
  showQuestion();
}

function showQuestion() {
  resetState();
  let currentQuizData = quizData[currentQuestion];
  questionEl.innerHTML = `${currentQuestion + 1}. ${currentQuizData.question}`;

  currentQuizData.options.forEach((option) => {
    const button = document.createElement("button");
    button.innerHTML = option;
    button.classList.add("btn");
    button.addEventListener("click", () => selectAnswer(button, currentQuizData.correct));
    answerButtons.appendChild(button);
  });

  progressBar.style.width = `${((currentQuestion + 1) / quizData.length) * 100}%`;
}

function resetState() {
  nextButton.style.display = "none";
  while (answerButtons.firstChild) {
    answerButtons.removeChild(answerButtons.firstChild);
  }
}

function selectAnswer(button, correct) {
  const allButtons = document.querySelectorAll(".btn");
  allButtons.forEach(btn => {
    btn.classList.remove("bg-blue-500", "opacity-50");
    btn.disabled = true;
    if (btn.innerHTML === correct) btn.classList.add("bg-green-600");
  });

  button.classList.add("bg-blue-500");
  selectedAnswer = button.innerHTML;

  if (selectedAnswer === correct) score++;

  nextButton.style.display = "block";
}

function showScore() {
  resetState();
  questionEl.innerHTML = `🎉 Quiz Complete!<br>Great job learning about Zama & FHE!<br><br>Your Score: ${score}/${quizData.length}`;

  const joinBtn = document.createElement("button");
  joinBtn.innerHTML = "🚀 Join Zama Creator Program";
  joinBtn.classList.add("btn", "mt-4", "bg-purple-600");
  joinBtn.addEventListener("click", () => window.open("https://guild.xyz/zama", "_blank"));
  quizContainer.appendChild(joinBtn);

  const restartBtn = document.createElement("button");
  restartBtn.innerHTML = "Restart Quiz";
  restartBtn.classList.add("btn", "mt-2", "bg-gray-700");
  restartBtn.addEventListener("click", startQuiz);
  quizContainer.appendChild(restartBtn);

  progressBar.style.width = "100%";
}

function handleNextButton() {
  currentQuestion++;
  if (currentQuestion < quizData.length) {
    showQuestion();
  } else {
    showScore();
  }
}

nextButton.addEventListener("click", () => {
  if (selectedAnswer) {
    handleNextButton();
  }
});

startQuiz();
</script>
